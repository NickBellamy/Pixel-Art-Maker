$(".pixel-canvas").contextmenu(function(){return!1}),$("body").on("dragstart",function(e){e.preventDefault()});const mouseState={isLeftMouseDown:!1,isRightMouseDown:!1,toggleButton:function(e){1===e?this.isLeftMouseDown=!this.isLeftMouseDown:3===e&&(this.isRightMouseDown=!this.isRightMouseDown,this.isRightMouseDown?drawMode.delete():drawMode.draw())}};$("body").on("mousedown mouseup",function(e){mouseState.toggleButton(e.which)}),$(".main-content a").click(function(e){const t=$(this).parent().attr("class"),o=$(this).attr("class");"add"===o?"top"===t||"bottom"===t?addRow(t):addColumn(t):"remove"===o&&("top"===t||"bottom"===t?removeRow(t):removeColumn(t)),e.preventDefault()}),$("body").keydown(function(e){switch(e.which){case 87:e.shiftKey?removeRow("top"):addRow("top");break;case 65:e.shiftKey?removeColumn("left"):addColumn("left");break;case 83:e.shiftKey?removeRow("bottom"):addRow("bottom");break;case 68:e.shiftKey?removeColumn("right"):addColumn("right")}}),$("body").keydown(function(e){"Shift"===e.key&&($(".remove").show(),$(".add").hide(),drawMode.delete())}),$("body").keyup(function(e){"Shift"===e.key&&($(".remove").hide(),$(".add").show(),drawMode.draw())}),$("input[type=number]").keydown(function(e){let t=["Delete","Backspace","Tab","ArrowLeft","ArrowRight","Enter"];for(let e=0;e<10;e++)t.push(e.toString());-1===$.inArray(e.key,t)&&e.preventDefault()});const drawMode={isDeleteMode:!1,delete:function(){$("table:hover").css("cursor","url(cursors/eraser.cur), auto"),colorHandler.removeHoverEffect(),this.isDeleteMode=!0},draw:function(){$("table:hover").css("cursor","url(cursors/pencil.cur), auto"),colorHandler.addHoverEffectColor(),this.isDeleteMode=!1}},colorHandler={color:$(".color-picker").val(),addHoverEffectColor:function(){$("td").css("background-image","linear-gradient("+this.color+", "+this.color+")")},removeHoverEffect:function(){$("td").css("background-image","none")}};$(".color-picker").change(function(){colorHandler.color=$(this).val(),colorHandler.addHoverEffectColor()}),$(".size-picker").submit(function(e){clearGrid(),makeGrid(),e.preventDefault()});function clearGrid(){for(;$("table tr");)$("tr:first").remove()}function makeGrid(){const e=$(".input-height").val(),t=$(".input-width").val();let o="";for(let n=0;n<e;n++){o+="<tr>";for(let e=0;e<t;e++)o+="<td></td>";o+="</tr>"}$(".pixel-canvas").append(o),setupTableBindings(),$(".main-content").show()}function setupTableBindings(){colorHandler.addHoverEffectColor(),$("td").mouseover(function(){mouseState.isRightMouseDown||drawMode.isDeleteMode&&mouseState.isLeftMouseDown?$(this).css("background-color","#fff"):mouseState.isLeftMouseDown&&$(this).css("background-color",colorHandler.color)}),$("td").mousedown(function(e){3===e.which||drawMode.isDeleteMode&&1===e.which?$(this).css("background-color","#fff"):1===e.which&&$(this).css("background-color",colorHandler.color)})}function addRow(e){let t="<tr>";const o=$("tr:first td").length;for(let e=0;e<o;e++)t+="<td></td>";t+="</tr>","top"===e?$(".pixel-canvas").prepend(t):"bottom"===e&&$(".pixel-canvas").append(t),setupTableBindings(),changeInputValue(".input-height",1)}function addColumn(e){$("tr").each(function(){"left"===e?$(this).prepend("<td></td>"):"right"===e&&$(this).append("<td></td>")}),setupTableBindings(),changeInputValue(".input-width",1)}function removeRow(e){"top"===e?$("tr:first").remove():"bottom"===e&&$("tr:last").remove(),changeInputValue(".input-height",-1)}function removeColumn(e){const t=$("tr:first td").length;$("tr").each(function(){"left"===e?$(this).find("td:eq(0)").remove():"right"===e&&$(this).find("td:eq("+(t-1).toString()+")").remove()}),changeInputValue(".input-width",-1)}function changeInputValue(e,t){$(e).val(parseInt($(e).val())+t),$(e).val()<=0&&$(".main-content").hide()}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2lnbnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogR2VuZXJhbCBmdW5jdGlvbmFsaXR5ICovXHJcblxyXG4vLyBQcmV2ZW50IGNvbnRleHQgbWVudSBvbiByaWdodCBjbGlja1xyXG4kKCcucGl4ZWwtY2FudmFzJykuY29udGV4dG1lbnUoZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn0pO1xyXG5cclxuLy8gUHJldmVudCBhY2NpZGVudGFsIGRyYWdnaW5nIG9mIGVsZW1lbnRzIG9uIHBhZ2VcclxuJCgnYm9keScpLm9uKCdkcmFnc3RhcnQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbn0pO1xyXG5cclxuLyogTW91c2UgRXZlbnRzKi9cclxuXHJcbi8vIE5hbWVzcGFjZSB0byBzdG9yZSBtb3VzZSBidXR0b24gYW5kIGN1cnNvciBzdGF0ZVxyXG5jb25zdCBtb3VzZVN0YXRlID0ge1xyXG4gICAgaXNMZWZ0TW91c2VEb3duOiBmYWxzZSxcclxuICAgIGlzUmlnaHRNb3VzZURvd246IGZhbHNlLFxyXG4gICAgLy8gU2V0cyBtb3VzZSBzdGF0ZSBhbmQgdG9nZ2xlcyBjdXJzb3IgYW5kIGhvdmVyIGVmZmVjdHNcclxuICAgIHRvZ2dsZUJ1dHRvbjogZnVuY3Rpb24oYnV0dG9uKSB7XHJcbiAgICAgICAgaWYgKGJ1dHRvbiA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzTGVmdE1vdXNlRG93biA9ICEodGhpcy5pc0xlZnRNb3VzZURvd24pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uID09PSAzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNSaWdodE1vdXNlRG93biA9ICEodGhpcy5pc1JpZ2h0TW91c2VEb3duKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNSaWdodE1vdXNlRG93bikge1xyXG4gICAgICAgICAgICAgICAgZHJhd01vZGUuZGVsZXRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkcmF3TW9kZS5kcmF3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBUb2dnbGUgbW91c2UgYnV0dG9uIHN0YXRlIG9uIG1vdXNlZG93biAvIG1vdXNldXBcclxuJCgnYm9keScpLm9uKCdtb3VzZWRvd24gbW91c2V1cCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgIG1vdXNlU3RhdGUudG9nZ2xlQnV0dG9uKGUud2hpY2gpO1xyXG59KTtcclxuXHJcbi8vIEV2ZW50IGhhbmRsZXIgZm9yIGFkZGluZyBhbmQgcmVtb3Zpbmcgcm93cyBhbmQgY29sdW1ucyBvbiBjbGlja1xyXG4kKCcubWFpbi1jb250ZW50IGEnKS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBjb25zdCBQT1NJVElPTiA9ICQodGhpcykucGFyZW50KCkuYXR0cignY2xhc3MnKTtcclxuICAgIGNvbnN0IE1PRElGSUVSID0gJCh0aGlzKS5hdHRyKCdjbGFzcycpO1xyXG5cclxuICAgIC8vIElmIGNhbGxlZCBmcm9tIGFkZCBjbGFzcyB0aGVuIGFkZCByb3cvY29sdW1uXHJcbiAgICBpZiAoTU9ESUZJRVIgPT09ICdhZGQnKSB7XHJcbiAgICAgICAgaWYgKFBPU0lUSU9OID09PSAndG9wJyB8fCBQT1NJVElPTiA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgYWRkUm93KFBPU0lUSU9OKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhZGRDb2x1bW4oUE9TSVRJT04pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFbHNlIGlmIGNhbGxlZCBmcm9tIHJlbW92ZSBjbGFzcyB0aGVuIHJlbW92ZSByb3cvY29sdW1uXHJcbiAgICB9IGVsc2UgaWYgKE1PRElGSUVSID09PSAncmVtb3ZlJykge1xyXG4gICAgICAgIGlmIChQT1NJVElPTiA9PT0gJ3RvcCcgfHwgUE9TSVRJT04gPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVJvdyhQT1NJVElPTik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVtb3ZlQ29sdW1uKFBPU0lUSU9OKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBQcmV2ZW50IG9wZW5pbmcgaW4gbmV3IHdpbmRvdyB3aGVuIHNoaWZ0IGtleSBpcyBoZWxkIG9uIGNsaWNraW5nXHJcbiAgICAvLyBQcmV2ZW50cyByZWxvYWRpbmcgcGFnZSBvbiBhZGQvcmVtb3ZlIHJvdy9jb2x1bW4gY2xpY2tcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxufSk7XHJcblxyXG4vKiBLZXlib2FyZCBFdmVudHMgKi9cclxuXHJcbi8vIEJpbmQgV0FTRCBrZXlib2FyZCBjb250cm9sc1xyXG4vLyBXIEFkZHMgcm93IHRvIHRoZSB0b3AsIFNoaWZ0ICsgVyByZW1vdmVzIHJvdyBmcm9tIHRoZSB0b3BcclxuLy8gQSBBZGRzIGNvbHVtbiB0byB0aGUgbGVmdCwgU2hpZnQgKyBBIHJlbW92ZXMgY29sdW1uIGZyb20gdGhlIGxlZnRcclxuLy8gUyBBZGRzIHJvdyB0byB0aGUgYm90dG9tLCBTaGlmdCArIFMgcmVtb3ZlcyByb3cgZnJvbSB0aGUgYm90dG9tXHJcbi8vIEQgQWRkcyBjb2x1bW4gdG8gdGhlIHJpZ2h0LCBTaGlmdCArIEQgcmVtb3ZlcyBjb2x1bW4gZnJvbSB0aGUgcmlnaHRcclxuJCgnYm9keScpLmtleWRvd24oZnVuY3Rpb24oZSkge1xyXG4gICAgc3dpdGNoIChlLndoaWNoKSB7XHJcbiAgICBjYXNlIDg3OiAvLyBXXHJcbiAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgcmVtb3ZlUm93KCd0b3AnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhZGRSb3coJ3RvcCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIGNhc2UgNjU6IC8vIEFcclxuICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICByZW1vdmVDb2x1bW4oJ2xlZnQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhZGRDb2x1bW4oJ2xlZnQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDgzOiAvLyBTXHJcbiAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgcmVtb3ZlUm93KCdib3R0b20nKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhZGRSb3coJ2JvdHRvbScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIGNhc2UgNjg6IC8vIERcclxuICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICByZW1vdmVDb2x1bW4oJ3JpZ2h0Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWRkQ29sdW1uKCdyaWdodCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBTaG93IFwiUmVtb3ZlXCIgbGlua3MgYW5kIGhpZGUgXCJBZGRcIiBsaW5rcyB3aGlsZSBzaGlmdCBrZXkgaXMgZG93blxyXG4kKCdib2R5Jykua2V5ZG93bihmdW5jdGlvbihlKSB7XHJcbiAgICBpZiAoZS5rZXkgPT09ICdTaGlmdCcpIHtcclxuICAgICAgICAkKCcucmVtb3ZlJykuc2hvdygpO1xyXG4gICAgICAgICQoJy5hZGQnKS5oaWRlKCk7XHJcbiAgICAgICAgLy8gRW50ZXIgZGVsZXRlIG1vZGUgd2hpbGUgc2hpZnQgaXMgaGVsZFxyXG4gICAgICAgIGRyYXdNb2RlLmRlbGV0ZSgpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vIFNob3cgXCJBZGRcIiBsaW5rcywgYW5kIGhpZGUgXCJSZW1vdmVcIiBsaW5rcyB3aGVuIHNoaWZ0IGtleSBpcyB1cFxyXG4kKCdib2R5Jykua2V5dXAoZnVuY3Rpb24oZSkge1xyXG4gICAgaWYgKGUua2V5ID09PSAnU2hpZnQnKSB7XHJcbiAgICAgICAgJCgnLnJlbW92ZScpLmhpZGUoKTtcclxuICAgICAgICAkKCcuYWRkJykuc2hvdygpO1xyXG4gICAgICAgIC8vIEVudGVyIGRyYXcgbW9kZSB3aGVuIHNoaWZ0IGlzIHJlbGVhc2VkXHJcbiAgICAgICAgZHJhd01vZGUuZHJhdygpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vIFJlc3RyaWN0IGtleXMgYXZhaWxhYmxlIG9uIGlucHV0IGZpZWxkc1xyXG4vLyBDYW4ndCBzYW5pdGlzZSB2YWx1ZXM7IEZpcmVmb3ggZG9lc24ndCBzdG9yZSBub24tdmFsaWQgdmFsdWVzIHRvIG1hbmlwdWxhdGVcclxuJCgnaW5wdXRbdHlwZT1udW1iZXJdJykua2V5ZG93bihmdW5jdGlvbihlKSB7XHJcbiAgICBsZXQgdmFsaWRLZXlzID0gW1xyXG4gICAgICAgICdEZWxldGUnLFxyXG4gICAgICAgICdCYWNrc3BhY2UnLFxyXG4gICAgICAgICdUYWInLFxyXG4gICAgICAgICdBcnJvd0xlZnQnLFxyXG4gICAgICAgICdBcnJvd1JpZ2h0JyxcclxuICAgICAgICAnRW50ZXInXHJcbiAgICBdO1xyXG5cclxuICAgIC8vIEFkZCAnMCcgLSAnOScgdG8gdmFsaWRLZXlzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICB2YWxpZEtleXMucHVzaChpLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIGtleSBpcyBpbiB2YWxpZCBrZXkgYXJyYXksIGlmIG5vdCwgcHJldmVudCBpdCBmcm9tIGJlaW5nIGVudGVyZWRcclxuICAgIGlmICgkLmluQXJyYXkoZS5rZXksIHZhbGlkS2V5cykgPT09IC0xKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8qIE1haW4gcHJvZ3JhbSAqL1xyXG5cclxuLy8gSGFuZGxlciBmb3IgZHJhdyBvciBkZWxldGUgc3RhdGVcclxuY29uc3QgZHJhd01vZGUgPSB7XHJcbiAgICBpc0RlbGV0ZU1vZGU6IGZhbHNlLFxyXG4gICAgZGVsZXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBTZXQgY3Vyc29yIHRvIHRoZSBlcmFzZXJcclxuICAgICAgICAkKCd0YWJsZTpob3ZlcicpLmNzcygnY3Vyc29yJywgJ3VybChjdXJzb3JzL2VyYXNlci5jdXIpLCBhdXRvJyk7XHJcbiAgICAgICAgY29sb3JIYW5kbGVyLnJlbW92ZUhvdmVyRWZmZWN0KCk7XHJcbiAgICAgICAgdGhpcy5pc0RlbGV0ZU1vZGUgPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIGRyYXc6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIFNldCBjdXJzb3IgdG8gcGVuY2lsXHJcbiAgICAgICAgJCgndGFibGU6aG92ZXInKS5jc3MoJ2N1cnNvcicsICd1cmwoY3Vyc29ycy9wZW5jaWwuY3VyKSwgYXV0bycpO1xyXG4gICAgICAgIGNvbG9ySGFuZGxlci5hZGRIb3ZlckVmZmVjdENvbG9yKCk7XHJcbiAgICAgICAgdGhpcy5pc0RlbGV0ZU1vZGUgPSBmYWxzZTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIE5hbWVzcGFjZSB0byBzdG9yZSB1c2VyJ3MgY29sb3VyIHNlbGVjdGlvbiBhbmQgaGFuZGxlIGhvdmVyIGVmZmVjdHNcclxuY29uc3QgY29sb3JIYW5kbGVyID0ge1xyXG4gICAgY29sb3I6ICQoJy5jb2xvci1waWNrZXInKS52YWwoKSxcclxuICAgIGFkZEhvdmVyRWZmZWN0Q29sb3I6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoJ3RkJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJyxcclxuICAgICAgICAgICAgJ2xpbmVhci1ncmFkaWVudCgnICsgdGhpcy5jb2xvciArICcsICcgKyB0aGlzLmNvbG9yICsgJyknXHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcbiAgICByZW1vdmVIb3ZlckVmZmVjdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCgndGQnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAnbm9uZScpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gVXBkYXRlIGNvbG9ySGFuZGxlci5jb2xvciBhbmQgaG92ZXIgZWZmZWN0IGNvbG91ciB3aGVuIG5ldyBjb2xvdXIgaXMgcGlja2VkXHJcbiQoJy5jb2xvci1waWNrZXInKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcbiAgICBjb2xvckhhbmRsZXIuY29sb3IgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgY29sb3JIYW5kbGVyLmFkZEhvdmVyRWZmZWN0Q29sb3IoKTtcclxufSk7XHJcblxyXG4vLyBDbGVhcnMgZ3JpZCBhbmQgcGFzc2VzIHVzZXIgZGVmaW5lZCBwYXJhbWV0ZXJzIHRvIG1ha2VHcmlkKClcclxuJCgnLnNpemUtcGlja2VyJykuc3VibWl0KGZ1bmN0aW9uKGUpIHtcclxuICAgIGNsZWFyR3JpZCgpO1xyXG4gICAgbWFrZUdyaWQoKTtcclxuICAgIC8vIFByZXZlbnQgcGFnZSByZWxvYWRcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxufSk7XHJcblxyXG4vLyBSZW1vdmVzIGFueSBwcmUtZXhpc2luZyBncmlkXHJcbmZ1bmN0aW9uIGNsZWFyR3JpZCgpIHtcclxuICAgIC8vIE11c3QgdXNlIHdoaWxlIGxvb3AgdG8gY29tcGx5IHdpdGggcHJvamVjdCBzcGVjaWZpY2F0aW9uXHJcbiAgICAvLyAkKCcucGl4ZWwtY2FudmFzJykuZW1wdHkoKTsgd291bGQgYmUgY2xlYW5lclxyXG4gICAgd2hpbGUgKCQoJ3RhYmxlIHRyJykpIHtcclxuICAgICAgICAkKCd0cjpmaXJzdCcpLnJlbW92ZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBEcmF3cyBncmlkIHVzaW5nIHBhc3NlZCBwYXJhbWV0ZXJzXHJcbmZ1bmN0aW9uIG1ha2VHcmlkKCkge1xyXG4gICAgY29uc3QgR1JJRF9IRUlHSFQgPSAkKCcuaW5wdXQtaGVpZ2h0JykudmFsKCk7XHJcbiAgICBjb25zdCBHUklEX1dJRFRIID0gJCgnLmlucHV0LXdpZHRoJykudmFsKCk7XHJcbiAgICBsZXQgb3V0cHV0ID0gJyc7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEdSSURfSEVJR0hUOyBpKyspIHtcclxuICAgICAgICBvdXRwdXQgKz0gJzx0cj4nO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgR1JJRF9XSURUSDsgaisrKSB7XHJcbiAgICAgICAgICAgIG91dHB1dCArPSAnPHRkPjwvdGQ+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgb3V0cHV0ICs9ICc8L3RyPic7XHJcbiAgICB9XHJcbiAgICAkKCcucGl4ZWwtY2FudmFzJykuYXBwZW5kKG91dHB1dCk7XHJcblxyXG4gICAgLy8gQmluZCBldmVudCBoYW5kbGVycyB0byB0YWJsZSBlbGVtZW50c1xyXG4gICAgc2V0dXBUYWJsZUJpbmRpbmdzKCk7XHJcblxyXG4gICAgLy8gTWFrZSB0aGUgZGl2IGNvbnRhaW5pbmcgdGhlIGFkZCByb3cvY29sdW1uIGNvbnRyb2xzIHNob3dcclxuICAgICQoJy5tYWluLWNvbnRlbnQnKS5zaG93KCk7XHJcbn1cclxuXHJcbi8vIEJpbmQgZXZlbnQgaGFuZGxlcnMgdG8gdGFibGUgZWxlbWVudHNcclxuZnVuY3Rpb24gc2V0dXBUYWJsZUJpbmRpbmdzKCkge1xyXG4gICAgY29sb3JIYW5kbGVyLmFkZEhvdmVyRWZmZWN0Q29sb3IoKTtcclxuXHJcbiAgICAvLyBCaW5kIG1vdXNlb3ZlciBmb3IgZHJhZyBzZWxlY3Rpb24gb3ZlciA8dGQ+c1xyXG4gICAgJCgndGQnKS5tb3VzZW92ZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKG1vdXNlU3RhdGUuaXNSaWdodE1vdXNlRG93biB8fCAoZHJhd01vZGUuaXNEZWxldGVNb2RlICYmIG1vdXNlU3RhdGUuaXNMZWZ0TW91c2VEb3duKSkge1xyXG4gICAgICAgICAgICAvLyBSaWdodCBjbGljayByZXNldHMgKFwiZGVsZXRlc1wiKSB0aGUgcGl4ZWwgYnkgcmVzZXR0aW5nIGJnIGNvbG91clxyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICcjZmZmJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtb3VzZVN0YXRlLmlzTGVmdE1vdXNlRG93bikge1xyXG4gICAgICAgICAgICAvLyBMZWZ0IGNsaWNrIGZpbGxzIHBpeGVsIHdpdGggc2VsZWN0ZWQgY29sb3VyXHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgY29sb3JIYW5kbGVyLmNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBCaW5kIG1vdXNlZG93biBmb3IgY2xpY2sgc2VsZWN0aW9uIG92ZXIgPHRkPnNcclxuICAgICQoJ3RkJykubW91c2Vkb3duKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS53aGljaCA9PT0gMyB8fCAoZHJhd01vZGUuaXNEZWxldGVNb2RlICYmIGUud2hpY2ggPT09IDEpKSB7XHJcbiAgICAgICAgICAgIC8vIFJpZ2h0IGNsaWNrIHJlc2V0cyAoXCJkZWxldGVzXCIpIHRoZSBwaXhlbCBieSByZXNldHRpbmcgYmcgY29sb3VyXHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNmZmYnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IDEpIHtcclxuICAgICAgICAgICAgLy8gTGVmdCBjbGljayBmaWxscyBwaXhlbCB3aXRoIHNlbGVjdGVkIGNvbG91clxyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGNvbG9ySGFuZGxlci5jb2xvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFJvdyhwb3NpdGlvbikge1xyXG4gICAgbGV0IG5ld1JvdyA9ICc8dHI+JztcclxuICAgIGNvbnN0IEdSSURfV0lEVEggPSAkKCd0cjpmaXJzdCB0ZCcpLmxlbmd0aDtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEdSSURfV0lEVEg7IGkrKykge1xyXG4gICAgICAgIG5ld1JvdyArPSAnPHRkPjwvdGQ+JztcclxuICAgIH1cclxuICAgIG5ld1JvdyArPSAnPC90cj4nO1xyXG5cclxuICAgIGlmIChwb3NpdGlvbiA9PT0gJ3RvcCcpIHtcclxuICAgICAgICAkKCcucGl4ZWwtY2FudmFzJykucHJlcGVuZChuZXdSb3cpO1xyXG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAkKCcucGl4ZWwtY2FudmFzJykuYXBwZW5kKG5ld1Jvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQmluZCBldmVudCBoYW5kbGVycyB0byB0YWJsZSBlbGVtZW50c1xyXG4gICAgc2V0dXBUYWJsZUJpbmRpbmdzKCk7XHJcblxyXG4gICAgLy8gSW5jcmVtZW50IHRoZSBncmlkIGhlaWdodCBpbnB1dCBieSBvbmVcclxuICAgIGNoYW5nZUlucHV0VmFsdWUoJy5pbnB1dC1oZWlnaHQnLCAxKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ29sdW1uKHBvc2l0aW9uKSB7XHJcbiAgICAkKCd0cicpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wcmVwZW5kKCc8dGQ+PC90ZD4nKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8dGQ+PC90ZD4nKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBCaW5kIGV2ZW50IGhhbmRsZXJzIHRvIHRhYmxlIGVsZW1lbnRzXHJcbiAgICBzZXR1cFRhYmxlQmluZGluZ3MoKTtcclxuXHJcbiAgICAvLyBJbmNyZW1lbnQgdGhlIGdyaWQgd2lkdGggaW5wdXQgYnkgb25lXHJcbiAgICBjaGFuZ2VJbnB1dFZhbHVlKCcuaW5wdXQtd2lkdGgnLCAxKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlUm93KHBvc2l0aW9uKSB7XHJcbiAgICBpZiAocG9zaXRpb24gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgJCgndHI6Zmlyc3QnKS5yZW1vdmUoKTtcclxuICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgJCgndHI6bGFzdCcpLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERlY3JlbWVudCB0aGUgZ3JpZCBoZWlnaHQgaW5wdXQgYnkgb25lXHJcbiAgICBjaGFuZ2VJbnB1dFZhbHVlKCcuaW5wdXQtaGVpZ2h0JywgLTEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVDb2x1bW4ocG9zaXRpb24pIHtcclxuICAgIGNvbnN0IEdSSURfV0lEVEggPSAkKCd0cjpmaXJzdCB0ZCcpLmxlbmd0aDtcclxuICAgICQoJ3RyJykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAocG9zaXRpb24gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3RkOmVxKDApJykucmVtb3ZlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3RkOmVxKCcgKyAoR1JJRF9XSURUSCAtIDEpLnRvU3RyaW5nKCkgKyAnKScpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIERlY3JlbWVudCB0aGUgZ3JpZCB3aWR0aCBpbnB1dCBieSBvbmVcclxuICAgIGNoYW5nZUlucHV0VmFsdWUoJy5pbnB1dC13aWR0aCcsIC0xKTtcclxufVxyXG5cclxuLy8gTW9kaWZ5IGlucHV0RmllbGQgdmFsdWUgYnkgY2hhbmdlLCBjYWxsZWQgd2hlbmV2ZXIgdGhlIGdyaWQgc2l6ZSBjaGFuZ2VzXHJcbmZ1bmN0aW9uIGNoYW5nZUlucHV0VmFsdWUoaW5wdXRGaWVsZCwgY2hhbmdlKSB7XHJcbiAgICAkKGlucHV0RmllbGQpLnZhbChwYXJzZUludCgkKGlucHV0RmllbGQpLnZhbCgpKSArIGNoYW5nZSk7XHJcblxyXG4gICAgLy8gSGlkZSAubWFpbi1jb250ZW50IGlmIHRoZSBpbnB1dFR5cGUgaXMgbGVzcyB0aGFuIDBcclxuICAgIGlmICgkKGlucHV0RmllbGQpLnZhbCgpIDw9IDApIHtcclxuICAgICAgICAkKCcubWFpbi1jb250ZW50JykuaGlkZSgpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==
